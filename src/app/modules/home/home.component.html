<div class="layout">
  <nav class="navbar">
    <div class="navbar-left">
      <button
        class="sidebar-toggle"
        (click)="toggleSidebar()"
        pButton
        type="button"
        icon="pi pi-bars"
      ></button>
      <span class="logo">Laboratory Asset Management System</span>
      <button
        pButton
        type="button"
        icon="pi pi-moon"
        class="p-button-text ml-2"
        (click)="toggleDarkMode()"
        aria-label="Toggle dark mode"
      ></button>
    </div>
    <div class="navbar-right">
      <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
      <i class="pi pi-spin pi-cog" style="font-size: 2rem"></i>
    </div>
  </nav>
  <div class="main-content">
    <aside class="sidebar" [class.collapsed]="sidebarCollapsed">
      <div class="sidebar-nav">
        <ul (click)="$event.stopPropagation()">
          <li>
            <a routerLink="/home/dashboard">
              <i
                class="pi pi-objects-column"
                pTooltip="Dashboard"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Dashboard</span>
            </a>
          </li>

          <!-- <li>
            <a routerLink="/campus">
              <i
                class="pi pi-building"
                pTooltip="Campuses"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Campuses</span>
            </a>
          </li> -->

          <!-- <li>
            <a routerLink="/department">
              <i
                class="pi pi-building-columns"
                pTooltip="Department"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Department</span>
            </a>
          </li> -->

          <li>
            <a routerLink="/home/equipments">
              <i
                class="pi pi-warehouse"
                pTooltip="Equipment"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Equipment</span>
            </a>
          </li>
          <!-- <li>
            <a routerLink="/laboratory">
              <i
                class="pi pi-briefcase"
                pTooltip="Laboratory"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Laboratory</span>
            </a>
          </li> -->
          <!-- <li>
            <a routerLink="/maintenance">
              <i
                class="pi pi-wrench"
                pTooltip="Maintenance"
                [tooltipDisabled]="!sidebarCollapsed || isMobile"
                tooltipPosition="right"
              ></i>
              <span *ngIf="!sidebarCollapsed || isMobile">Maintenance</span>
            </a>
          </li> -->
        </ul>
      </div>
      <div class="sidebar-profile" [class.expanded]="profileExpanded">
        <div class="profile-header" (click)="toggleProfile()">
          <p-avatar
            [image]="
              user?.profile_picture
                ? user.profile_picture.replace('/media/', '')
                : 'https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png'
            "
            size="large"
            shape="circle"
          ></p-avatar>

          <div class="profile-info">
            <div class="profile-name" *ngIf="!sidebarCollapsed || isMobile">
              {{ user?.first_name }} {{ user?.last_name }}
            </div>
            <div class="profile-role" *ngIf="!sidebarCollapsed || isMobile">
              {{ user?.role }}
            </div>
          </div>
          <i
            class="pi pi-chevron-up profile-arrow"
            [class.rotated]="profileExpanded"
            *ngIf="!sidebarCollapsed || isMobile"
          ></i>
        </div>
        <div
          class="profile-actions"
          [@expandUp]="profileExpanded ? 'expanded' : 'collapsed'"
        >
          <a
            ><i
              class="pi pi-cog"
              pTooltip="Settings"
              [tooltipDisabled]="!sidebarCollapsed || isMobile"
              tooltipPosition="right"
            ></i>
            <span *ngIf="!sidebarCollapsed || isMobile">Settings</span></a
          >
          <a routerLink="/home/profile"
            ><i
              class="pi pi-file"
              pTooltip="Profile"
              [tooltipDisabled]="!sidebarCollapsed || isMobile"
              tooltipPosition="right"
            ></i>
            <span *ngIf="!sidebarCollapsed || isMobile">Profile</span></a
          >
          <a routerLink="/home/user-table"
            ><i
              class="pi pi-table"
              pTooltip="View User"
              [tooltipDisabled]="!sidebarCollapsed || isMobile"
              tooltipPosition="right"
            ></i>
            <span *ngIf="!sidebarCollapsed || isMobile">View Users</span></a
          >
          <a (click)="_auth.logout()"
            ><i
              class="pi pi-power-off"
              pTooltip="Logout"
              [tooltipDisabled]="!sidebarCollapsed || isMobile"
              tooltipPosition="right"
            ></i>
            <span *ngIf="!sidebarCollapsed || isMobile">Logout</span></a
          >
        </div>
      </div>
    </aside>
    <section class="content" (click)="closeSidebar()">
      <router-outlet></router-outlet>
    </section>
  </div>
</div>
